<launch>
    <!--Path to resulting Excel log file-->
    <arg name="log_filepath" default="~/output.xlsx" />

    <!--Path to bag file with Kinect data-->
    <arg name="filename" default="" />
    
    <!--Run bag file with simulation time enabled-->
    <param name="use_sim_time" value="true"/>
    <node pkg="rosbag" type="play" name="player" output="screen" args="--clock $(arg filename)"/>
    
    <!--Start synchronization nodelet-->
    <node pkg="nodelet" type="nodelet" name="rgbd_sync" args="standalone rtabmap_ros/rgbd_sync" output="screen">
        
        <!--Remap input topics-->
        <remap from="rgb/image" to="/camera/rgb/image_rect_color"/>
        <remap from="depth/image" to="/camera/depth_registered/image_raw"/>
        <remap from="rgb/camera_info" to="/camera/rgb/camera_info"/>
        
        <!--Set approximate synchronization-->
        <param name="approx_sync" value="true"/>
    </node>
    
    <!--Start image segmentation node-->
    <node pkg="desktop_object_detection" type="image_segmentation.py" name="image_segmentation" />
    
    <!--Start Excel logger node-->
    <node pkg="desktop_object_detection" type="excel_logger.py" name="excel_logger" args="$(arg log_filepath) />
</launch>